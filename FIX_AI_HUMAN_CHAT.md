# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–µ –æ–±—â–µ–Ω–∏–µ AI –±–æ—Ç–∞

## üêõ –ü—Ä–æ–±–ª–µ–º–∞ (–±—ã–ª–æ)

–ë–æ—Ç –æ—Ç–≤–µ—á–∞–ª —à–∞–±–ª–æ–Ω–Ω–æ –∏ –Ω–µ –ø–æ–º–Ω–∏–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- ‚ùå –ö–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–∞—á–∏–Ω–∞–ª —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
- ‚ùå –ü–æ—Å–ª–µ "–ø–æ—Ä–æ—à–æ–∫" —Å–ø—Ä–∞—à–∏–≤–∞–ª "—á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?"
- ‚ùå –ù–µ –ø–æ–º–Ω–∏–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ùå –ü–æ–≤—Ç–æ—Ä—è–ª —Å–ø–∏—Å–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫–∞–∂–¥—ã–π —Ä–∞–∑

```
User: —Ö–æ—á—É –µ–∂–æ–≤–∏–∫
Bot: [–ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç–≤–µ—Ç –æ –µ–∂–æ–≤–∏–∫–µ]

User: –ø–æ—Ä–æ—à–æ–∫
Bot: –ü—Ä–∏–≤–µ—Ç! –Ø –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –°–ü–û–†–°. <—à–∞–±–ª–æ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤>
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü–µ—Ä–µ–¥–∞—á–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
**–§–∞–π–ª:** `spor3s-app/app/api/ai/route.ts`

**–ë—ã–ª–æ:**
```typescript
messages: [
  { role: "system", content: aiPrompt },
  { role: "user", content: userMessage }  // —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
],
```

**–°—Ç–∞–ª–æ:**
```typescript
messages: [
  { role: "system", content: aiPrompt },
  ...msgs  // –í–°–Ø –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
],
max_tokens: 800,          // –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
temperature: 0.8,         // –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
```

### 2. –ß–µ–ª–æ–≤–µ—á–Ω—ã–π –ø—Ä–æ–º–ø—Ç
**–§–∞–π–ª:** `spor3s-app/lib/contentManager.ts`

–û–±–Ω–æ–≤–ª–µ–Ω FALLBACK_PROMPT:
- ‚úÖ "–¢—ã ‚Äî –∂–∏–≤–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç, –∞ –Ω–µ —Ä–æ–±–æ—Ç"
- ‚úÖ "–ù–ï –ø–æ–≤—Ç–æ—Ä—è–π –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏"
- ‚úÖ "–í–°–ï–ì–î–ê —á–∏—Ç–∞–π –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è"
- ‚úÖ "–ü—Ä–æ–¥–æ–ª–∂–∞–π —Ä–∞–∑–≥–æ–≤–æ—Ä, –∞ –Ω–µ –Ω–∞—á–∏–Ω–∞–π –∑–∞–Ω–æ–≤–æ"
- ‚úÖ "–ù–∞ –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ"

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –≤ –ë–î
**–§–∞–π–ª:** `update_ai_prompt_human.sql`

–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ Supabase:
```bash
# –ù–∞ Supabase SQL Editor –∏–ª–∏ —á–µ—Ä–µ–∑ psql
psql postgresql://[connection_string] < update_ai_prompt_human.sql
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç (—Ç–µ–ø–µ—Ä—å)

–ë–æ—Ç –≤–µ–¥–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥:

```
User: —Ö–æ—á—É –µ–∂–æ–≤–∏–∫ –Ω–∞ –ø–∞–º—è—Ç—å
Bot: –û—Ç–ª–∏—á–Ω–æ! –ï–∂–æ–≤–∏–∫ –≥—Ä–µ–±–µ–Ω—á–∞—Ç—ã–π –æ—Ç–ª–∏—á–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å –ø–∞–º—è—Ç—å—é –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π.
     
     –í –∫–∞–∫–æ–π —Ñ–æ—Ä–º–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ:
     ‚Ä¢ –ö–∞–ø—Å—É–ª—ã (120 —à—Ç, 1100‚ÇΩ)
     ‚Ä¢ –ü–æ—Ä–æ—à–æ–∫ (100–≥, 1100‚ÇΩ)

User: –ø–æ—Ä–æ—à–æ–∫
Bot: –û—Ç–ª–∏—á–Ω–æ! –ï–∂–æ–≤–∏–∫ –≤ –ø–æ—Ä–æ—à–∫–µ 100–≥ ‚Äî 1100‚ÇΩ –∑–∞ –º–µ—Å—è—Ü.
     
     –ù–∞ –∫–∞–∫–æ–π —Å—Ä–æ–∫: –º–µ—Å—è—Ü –∏–ª–∏ 3-6 –º–µ—Å—è—Ü–µ–≤ –∫—É—Ä—Å?

User: –Ω–∞ –º–µ—Å—è—Ü
Bot: –î–æ–±–∞–≤–∏–ª –ï–∂–æ–≤–∏–∫ 100–≥ –ø–æ—Ä–æ—à–æ–∫ –≤ –∫–æ—Ä–∑–∏–Ω—É –∑–∞ 1100‚ÇΩ! ‚úÖ
```

---

## üöÄ –î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –õ–æ–∫–∞–ª—å–Ω–æ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
–§–∞–π–ª—ã —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

### –ù–∞ VPS
```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ VPS
scp -r spor3s-app/app/api/ai/route.ts root@185.166.197.49:/var/www/spor3s-app/spor3s-app/app/api/ai/
scp -r spor3s-app/lib/contentManager.ts root@185.166.197.49:/var/www/spor3s-app/spor3s-app/lib/

# 2. –ù–∞ VPS –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
ssh root@185.166.197.49
cd /var/www/spor3s-app
pm2 restart spor3s-nextjs
pm2 restart spor3s-bot

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs spor3s-bot --lines 50
```

### –û–±–Ω–æ–≤–∏—Ç—å –ë–î –ø—Ä–æ–º–ø—Ç
```bash
# –ù–∞ Supabase Dashboard ‚Üí SQL Editor
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ update_ai_prompt_human.sql –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ (msgs –≤–º–µ—Å—Ç–æ userMessage)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ–º–ø—Ç –≤ contentManager.ts
- [x] –°–æ–∑–¥–∞–Ω SQL –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ –≤ –ë–î
- [x] –£–≤–µ–ª–∏—á–µ–Ω—ã max_tokens –¥–æ 800
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ temperature 0.8 –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞
```
1. User: —Ö–æ—á—É –µ–∂–æ–≤–∏–∫
2. User: –ø–æ—Ä–æ—à–æ–∫
3. –û–∂–∏–¥–∞–µ—Ç—Å—è: –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä –ø—Ä–æ –µ–∂–æ–≤–∏–∫ –≤ –ø–æ—Ä–æ—à–∫–µ
```

### –¢–µ—Å—Ç 2: –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
```
1. User: –ø—Ä–∏–≤–µ—Ç
2. User: –º—É—Ö–æ–º–æ—Ä
3. –û–∂–∏–¥–∞–µ—Ç—Å—è: –±–æ—Ç –ù–ï –ø–æ–≤—Ç–æ—Ä–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–æ –≤—Ç–æ—Ä–æ–º –æ—Ç–≤–µ—Ç–µ
```

### –¢–µ—Å—Ç 3: –ö—Ä–∞—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
```
1. User: –ø–æ—Ä–æ—à–æ–∫ (–ø–æ—Å–ª–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞)
2. –û–∂–∏–¥–∞–µ—Ç—Å—è: –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –ø—Ä–æ —Ñ–æ—Ä–º—É, –∞ –Ω–µ –≤–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥
```

---

**–ì–æ—Ç–æ–≤–æ! üéâ –¢–µ–ø–µ—Ä—å –±–æ—Ç –æ–±—â–∞–µ—Ç—Å—è –∫–∞–∫ –∂–∏–≤–æ–π —á–µ–ª–æ–≤–µ–∫.**

