# üìä –°–≤–æ–¥–∫–∞ –ø–æ –∞–≥–µ–Ω—Ç–∞–º spor3s

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω `ecosystem.config.js`
–î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è PM2:
- ‚úÖ **spor3s-nextjs** - Next.js Mini App (:3000)
- ‚úÖ **spor3s-bot** - Telegram Bot API (@spor3s_bot)
- ‚úÖ **spor3z-client** - Telegram Client API (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)

### 2. –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `start-all-agents.js` | –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ |
| `check-all-agents.js` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ |
| `deploy-vps-complete.sh` | –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ SSH |
| `quick-vps-start.sh` | –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –Ω–∞ VPS |

### 3. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `VPS_DEPLOY_README.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
- `QUICK_VPS_SETUP.md` - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è VPS
- `.env.vps` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è VPS

---

## üéØ –ó–∞–ø—É—Å–∫ –Ω–∞ VPS

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ü—Ä—è–º–æ –Ω–∞ VPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
ssh root@185.166.197.49
cd /var/www/spor3s-app
node start-all-agents.js
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã —á–µ—Ä–µ–∑ SSH

```bash
# –ù–∞ Windows (—á–µ—Ä–µ–∑ Git Bash –∏–ª–∏ WSL)
bash deploy-vps-complete.sh
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤

```
spor3s-app/
‚îú‚îÄ‚îÄ app/                      # üåê Next.js Mini App
‚îú‚îÄ‚îÄ tg-bot/
‚îÇ   ‚îî‚îÄ‚îÄ bot.ts               # ü§ñ spor3s_bot (–∑–∞–∫–∞–∑—ã —á–µ—Ä–µ–∑ Telegram)
‚îú‚îÄ‚îÄ tg-client/
‚îÇ   ‚îî‚îÄ‚îÄ client.js            # üì® spor3z (–∏—Å—Ö–æ–¥—è—â–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)
‚îú‚îÄ‚îÄ ecosystem.config.js      # ‚öôÔ∏è PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (3 –ø—Ä–æ—Ü–µ—Å—Å–∞)
‚îú‚îÄ‚îÄ start-all-agents.js      # üöÄ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö
‚îú‚îÄ‚îÄ check-all-agents.js      # ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
‚îî‚îÄ‚îÄ .env.vps                 # üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è VPS
```

---

## üîÑ Workflow –∞–≥–µ–Ω—Ç–æ–≤

### 1. **spor3s_bot** (tg-bot/bot.ts)
**–†–æ–ª—å**: –ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤ –∏ –æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram

- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã: `/start`, `/help`, `/my_coins`, `/verify_youtube`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ AI API
- –ü–∞—Ä—Å–∏—Ç –∑–∞–∫–∞–∑—ã —Ñ–æ—Ä–º–∞—Ç–∞ "–ó–ê–ö–ê–ó: ..."
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä—É (MANAGER_CHAT_ID)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç deep-link –¥–ª—è Mini App

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- `SUPABASE_URL` + `SUPABASE_SERVICE_ROLE_KEY`
- `NEXT_PUBLIC_BASE_URL` - –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤

---

### 2. **spor3z-client** (tg-client/client.js)
**–†–æ–ª—å**: –ò—Å—Ö–æ–¥—è—â–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Telegram **Client API** (–Ω–µ Bot API)
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 07:00 –ø—Ä–æ–≤–µ—Ä—è–µ—Ç pending –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–º, –∫—Ç–æ –¥–∞–ª —Å–æ–≥–ª–∞—Å–∏–µ (`notification_consent`)
- –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–µ–∂–æ–≤–∏–∫, –≥—Ä–∏–± –∏ —Ç.–¥.)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏–µ–º: "–î–∞" / "–ù–µ—Ç"

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `TELEGRAM_API_ID` + `TELEGRAM_API_HASH`
- `TELEGRAM_SESSION_STRING` - –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è
- `SUPABASE_URL` + `SUPABASE_SERVICE_ROLE_KEY`

**–ö–æ–º–∞–Ω–¥—ã**:
```bash
# –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ
node tg-client/client.js ask-consent @username

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
node tg-client/client.js send-reminder 123456789 "–¢–µ–∫—Å—Ç"
```

---

### 3. **spor3s-nextjs** (Next.js App)
**–†–æ–ª—å**: Mini App –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- `/api/ai` - AI-—á–∞—Ç
- `/api/order-simple` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- `/api/generate-auth-code` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–æ–≤ –ø—Ä–∏–≤—è–∑–∫–∏
- `/api/subscribe-bonus` - –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É
- WebApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–æ—Ä–∑–∏–Ω–æ–π

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `NEXT_PUBLIC_SUPABASE_URL` + `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `OPENROUTER_API_KEY` - –¥–ª—è AI

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram Bot (@spor3s_bot)
                     ‚Üì
               AI API (/api/ai)
                     ‚Üì
            –û—Ç–≤–µ—Ç + Deep Link
                     ‚Üì
               Mini App (WebApp)
                     ‚Üì
              –ö–æ—Ä–∑–∏–Ω–∞ + –ó–∞–∫–∞–∑
                     ‚Üì
            Supabase (orders)
                     ‚Üì
           –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É
           
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:
Supabase (reminders) ‚Üí spor3z-client ‚Üí –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (07:00)
```

---

## üõ† –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤:

```bash
# Supabase (–æ–±—â–µ–µ)
SUPABASE_URL=https://hwospkbheqaauluoytvz.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...

# –î–ª—è spor3s-bot
TELEGRAM_BOT_TOKEN=6522297183:AAE...
MANAGER_CHAT_ID=5554098114
BOT_USERNAME=spor3s_bot

# –î–ª—è spor3z-client
TELEGRAM_API_ID=25152508
TELEGRAM_API_HASH=e6d11fbfdac29ec3f8e9f6eb4dc54385
TELEGRAM_SESSION_STRING=1AgAOMTQ5LjE1NC4...

# –î–ª—è spor3s-nextjs
OPENROUTER_API_KEY=sk-or-v1-c369841...
NEXT_PUBLIC_BASE_URL=http://185.166.197.49:3000
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2
pm2 status

# –û–∂–∏–¥–∞–µ—Ç—Å—è:
# spor3s-nextjs  | online | ...
# spor3s-bot     | online | ...
# spor3z-client  | online | ...

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTP
curl http://localhost:3000
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs --lines 50

# 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
node check-all-agents.js
```

---

## üéâ –ò—Ç–æ–≥

**–¢—Ä–∏ –∞–≥–µ–Ω—Ç–∞ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ:**

| –ê–≥–µ–Ω—Ç | –§–∞–π–ª | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|-------|------|--------|--------|
| Mini App | `app/` | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–∫–∞–∑–æ–≤ | ‚úÖ |
| spor3s_bot | `tg-bot/bot.ts` | –ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤ –≤ Telegram | ‚úÖ |
| spor3z | `tg-client/client.js` | –ò—Å—Ö–æ–¥—è—â–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è | ‚úÖ |

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `ecosystem.config.js` (PM2)  
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: `start-all-agents.js` + `check-all-agents.js`  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `VPS_DEPLOY_README.md` + `QUICK_VPS_SETUP.md`

---

**–ó–∞–ø—É—Å–∫:**
```bash
ssh root@185.166.197.49
cd /var/www/spor3s-app
node start-all-agents.js
```

**–ì–æ—Ç–æ–≤–æ! üöÄ**

