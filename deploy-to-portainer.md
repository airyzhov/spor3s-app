# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π Spor3s App —á–µ—Ä–µ–∑ Portainer

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–∫—É—â–∏–º –ø–æ–¥—Ö–æ–¥–æ–º

–û–¥–∏–Ω —Ñ–∞–π–ª `docker-compose.yml` –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç. –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã:
- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### 1.1 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@your-server-ip

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
mkdir -p /opt/spor3s-app
cd /opt/spor3s-app
```

#### 1.2 –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ SCP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```powershell
# –í PowerShell –Ω–∞ Windows:
scp -r C:\Users\User\Documents\spor3s-app\spor3s-app\* root@your-server-ip:/opt/spor3s-app/
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ WinSCP**
1. –û—Ç–∫—Ä—ã—Ç—å WinSCP
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ `/opt/spor3s-app`
4. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –í–°–ï —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ Git (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/spor3s-app
git clone <your-repo-url> .
```

#### 1.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
ls -la /opt/spor3s-app/

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ–∞–π–ª—ã:
# - docker-compose.yml
# - nginx-spor3s-app.conf
# - emergency_server.js
# - app/ (–ø–∞–ø–∫–∞ —Å Next.js)
# - package.json
# - –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
```

### –≠—Ç–∞–ø 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/spor3s-app
nano .env

# –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
NODE_ENV=production
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
TELEGRAM_BOT_TOKEN=your_bot_token
```

### –≠—Ç–∞–ø 3: –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Portainer

#### 3.1 –û—Ç–∫—Ä—ã—Ç—å Portainer
1. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä ‚Üí `http://your-domain.com:9000`
2. –í–æ–π—Ç–∏ –≤ Portainer

#### 3.2 –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Stack
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Stacks**
2. –ù–∞–∂–∞—Ç—å **Add stack**
3. –í–≤–µ—Å—Ç–∏ –∏–º—è: `spor3s-app`
4. –í—Å—Ç–∞–≤–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `docker-compose.yml`

#### 3.3 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å volumes (–≤–∞–∂–Ω–æ!)
–í Portainer —Å–æ–∑–¥–∞—Ç—å volumes:
- `spor3s-app-data` - –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `spor3s-app-ssl` - –¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### 3.4 –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Stack
1. –ù–∞–∂–∞—Ç—å **Deploy the stack**
2. –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ —Ä–∞–∑–¥–µ–ª–µ **Containers**

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π docker-compose.yml –¥–ª—è Portainer:
```yaml
version: '3.8'

services:
  spor3s-nextjs:
    image: node:18-alpine
    container_name: spor3s-nextjs
    working_dir: /app
    ports:
      - "3000:3000"
    volumes:
      - /opt/spor3s-app:/app
      - /app/node_modules
      - /app/.next
    environment:
      - NODE_ENV=production
      - PORT=3000
    command: >
      sh -c "npm ci --only=production &&
             npm run build &&
             npm start"
    restart: unless-stopped
    networks:
      - spor3s-network

  spor3s-emergency:
    image: node:18-alpine
    container_name: spor3s-emergency
    working_dir: /app
    ports:
      - "5000:5000"
    volumes:
      - /opt/spor3s-app:/app
    environment:
      - NODE_ENV=production
      - PORT=5000
    command: "node emergency_server.js"
    restart: unless-stopped
    networks:
      - spor3s-network

  spor3s-nginx:
    image: nginx:alpine
    container_name: spor3s-nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - /opt/spor3s-app/nginx-spor3s-app.conf:/etc/nginx/conf.d/default.conf
      - /opt/spor3s-app/ssl:/etc/nginx/ssl
    depends_on:
      - spor3s-nextjs
      - spor3s-emergency
    restart: unless-stopped
    networks:
      - spor3s-network

networks:
  spor3s-network:
    driver: bridge
```

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥: Docker Compose CLI

–ï—Å–ª–∏ Portainer –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/spor3s-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `/opt/spor3s-app/`
- [ ] –°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –§–∞–π–ª `nginx-spor3s-app.conf` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –§–∞–π–ª `docker-compose.yml` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- [ ] –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã (`docker-compose ps`)
- [ ] –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫ (`docker-compose logs`)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://your-domain.com`
- [ ] Emergency API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://your-domain.com/emergency/`

## üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã
ls -la /opt/spor3s-app/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod +x /opt/spor3s-app/quick-deploy.sh
```

### –ï—Å–ª–∏ Nginx –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker exec spor3s-nginx nginx -t

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx
docker logs spor3s-nginx
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã** ‚Üí SCP/WinSCP
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env** ‚Üí –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã** ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –Ω–∞ –º–µ—Å—Ç–µ
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ CLI** ‚Üí `docker-compose up -d`
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏** ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫
6. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ Portainer** ‚Üí –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üí° –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- **–í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ü—É—Ç–∏ –≤ volumes** –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏

–¢–µ–ø–µ—Ä—å –¥–µ–ø–ª–æ–π –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üöÄ
