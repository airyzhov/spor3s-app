# โ ะกะะกะขะะะ ะะะขะะะ ะ ะะะะฃะกะะฃ

ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั: 15 ะพะบััะฑัั 2025  
ะกัะฐััั: **ะะะกะขะะะะะ ะะะะะะจะะะ**

---

## ๐ฏ ะะซะะะะะะะะซะ ะะะะะขะซ

### 1. โ ะัะพะฒะตัะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
- **env.local** ะฟัะพะฒะตัะตะฝ ะธ ัะพะดะตัะถะธั ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต ะฟะตัะตะผะตะฝะฝัะต
- Supabase ะฝะฐัััะพะตะฝ ะธ ะฟะพะดะบะปััะตะฝ
- Telegram API ะบะปััะธ ะฟัะธัััััะฒััั
- OpenRouter AI ะบะปัั ะฝะฐัััะพะตะฝ

### 2. โ ะกะพะทะดะฐะฝะธะต ัะฟัะฐะฒะปัััะธั ัะบัะธะฟัะพะฒ

ะกะพะทะดะฐะฝั 3 PowerShell ัะบัะธะฟัะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะธััะตะผะพะน:

#### `start-all-services.ps1`
ะะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟััะบะฐะตั ะฒัะต ัะปัะถะฑั ะฒ ะพัะดะตะปัะฝัั ะพะบะฝะฐั:
- Next.js Server (localhost:3000)
- Ngrok Tunnel (ั ะพะฟัะธะพะฝะฐะปัะฝัะผ ะทะฐะฟััะบะพะผ)
- Telegram Bot (@spor3s_bot)
- Spor3z Live Account (@spor3z)

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app
.\start-all-services.ps1
```

#### `stop-all-services.ps1`
ะััะฐะฝะฐะฒะปะธะฒะฐะตั ะฒัะต ะทะฐะฟััะตะฝะฝัะต ัะปัะถะฑั

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app
.\stop-all-services.ps1
```

#### `check-services-status.ps1`
ะัะพะฒะตััะตั ััะฐััั ะฒัะตั ัะปัะถะฑ ะธ ะบะพะฝัะธะณััะฐัะธะธ

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app
.\check-services-status.ps1
```

### 3. โ ะะฑะฝะพะฒะปะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ ะฑะพัะพะฒ

#### **start-spor3z-improved.js**
- ะะพะฑะฐะฒะปะตะฝะฐ ะฟะตัะตะผะตะฝะฝะฐั `BASE_API_URL` ะธะท env.local
- ะะทะผะตะฝะตะฝ endpoint ั `/api/ai-simple` ะฝะฐ `/api/ai`
- ะะพะฑะฐะฒะปะตะฝ fallback ะฝะฐ localhost ะตัะปะธ ะฟะตัะตะผะตะฝะฝะฐั ะฝะต ะทะฐะดะฐะฝะฐ

#### **tg-bot/enhanced-bot.js**
- ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต `this.apiUrl` ะฒ ะบะพะฝััััะบัะพั ะบะปะฐััะฐ
- ะัะต hardcoded URL ะทะฐะผะตะฝะตะฝั ะฝะฐ `${this.apiUrl}`
- ะะพะดะดะตัะถะบะฐ ะดะธะฝะฐะผะธัะตัะบะพะณะพ ะฟะตัะตะบะปััะตะฝะธั ะผะตะถะดั localhost ะธ ngrok

### 4. โ ะัะพะฒะตัะบะฐ API Routes

ะัะพะฒะตัะตะฝั ะธ ะบะพััะตะบัะฝั:
- `/api/ai` - ะพัะฝะพะฒะฝะพะน AI endpoint ั full context
- `/api/init-user` - ัะพะทะดะฐะฝะธะต/ะฟะพะปััะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
- `/api/ai-simple` - ัะฟัะพัะตะฝะฝัะน AI endpoint ะดะปั ัะตััะธัะพะฒะฐะฝะธั
- `/api/order-simple` - ะพัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะพะฒ

---

## ๐ ะะะกะขะะฃะะฆะะฏ ะะ ะะะะฃะกะะฃ

### ะะฐัะธะฐะฝั 1: ะะฒัะพะผะฐัะธัะตัะบะธะน ะทะฐะฟััะบ (ัะตะบะพะผะตะฝะดัะตััั)

```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app
.\start-all-services.ps1
```

ะกะบัะธะฟั:
1. ะัะพะฒะตัะธั ะฝะฐะปะธัะธะต ะฒัะตั ะฝะตะพะฑัะพะดะธะผัั ะดะธัะตะบัะพัะธะน
2. ะะฐะฟัััะธั Next.js server
3. ะัะตะดะปะพะถะธั ะทะฐะฟัััะธัั ngrok (ะธะปะธ ะทะฐะฟัััะธัะต ะฒัััะฝัั)
4. ะะฐะฟัััะธั Telegram Bot
5. ะะฐะฟัััะธั Spor3z Live Account
6. ะัะฟะพะปะฝะธั ะฟัะพะฒะตัะบั ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ

### ะะฐัะธะฐะฝั 2: ะััะฝะพะน ะทะฐะฟััะบ

**ะะบะฝะพ 1: Next.js Server**
```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app
npm run dev
```

**ะะบะฝะพ 2: Ngrok**
```powershell
ngrok http --domain=humane-jaguar-annually.ngrok-free.app 3000
```

**ะะบะฝะพ 3: Telegram Bot**
```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app\tg-bot
node enhanced-bot.js
```

**ะะบะฝะพ 4: Spor3z Account**
```powershell
cd C:\Users\User\Documents\spor3s-app\spor3s-app
node start-spor3z-improved.js
```

---

## ๐ ะะะฅะะขะะะขะฃะะ 3-ะะะะะะฌะะะ ะกะะกะขะะะซ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Mini App      โ    โ   Telegram Bot   โ    โ   Spor3z Live   โ
โ (source=        โ    โ (source=telegram โ    โ (source=spor3z) โ
โ  mini_app)      โ    โ     _bot)        โ    โ                 โ
โโโโโโโโโโฌโโโโโโโโโ    โโโโโโโโโโโฌโโโโโโโโโ    โโโโโโโโโโฌโโโโโโโโโ
         โ                       โ                       โ
         โ        โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ        โ
         โโโโโโโโโโค   Next.js API (port 3000)   โโโโโโโโโโ
                  โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
                                 โ
                  โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโ
                  โ      Supabase Database      โ
                  โ  โข users (telegram_id, id)  โ
                  โ  โข messages (source field)  โ
                  โ  โข orders                   โ
                  โ  โข ai_agent_status          โ
                  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ URL ะ ะะะะะะะะะซะ

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
- **Next.js**: http://localhost:3000
- **API URL**: ะธัะฟะพะปัะทัะตััั `NEXT_PUBLIC_BASE_URL` ะธะท env.local

### Production (ัะตัะตะท Ngrok)
- **Public URL**: https://humane-jaguar-annually.ngrok-free.app
- ะฃััะฐะฝะพะฒะธัะต ะฒ env.local: `NEXT_PUBLIC_BASE_URL=https://humane-jaguar-annually.ngrok-free.app`

### ะะตัะตะบะปััะตะฝะธะต ัะตะถะธะผะพะฒ

**ะะปั ัะฐะฑะพัั ัะตัะตะท localhost** (ะฟะพ ัะผะพะปัะฐะฝะธั):
```bash
# ะ env.local ะทะฐะบะพะผะผะตะฝัะธััะนัะต ะธะปะธ ัะดะฐะปะธัะต:
# NEXT_PUBLIC_BASE_URL=...
```

**ะะปั ัะฐะฑะพัั ัะตัะตะท ngrok**:
```bash
# ะ env.local ะดะพะฑะฐะฒััะต/ัะฐัะบะพะผะผะตะฝัะธััะนัะต:
NEXT_PUBLIC_BASE_URL=https://humane-jaguar-annually.ngrok-free.app
```

---

## ๐งช ะขะะกะขะะะะะะะะ

### 1. ะัะพะฒะตัะบะฐ ััะฐัััะฐ ัะปัะถะฑ
```powershell
.\check-services-status.ps1
```

### 2. ะัะพะฒะตัะบะฐ API endpoints

**ะงะตัะตะท localhost:**
```powershell
curl http://localhost:3000
```

**ะงะตัะตะท ngrok:**
```powershell
curl https://humane-jaguar-annually.ngrok-free.app
```

### 3. ะขะตััะพะฒัะต ััะตะฝะฐัะธะธ

#### **Mini App**
1. ะัะบัััั: t.me/spor3s_miniapp_bot
2. ะะฐะฟัััะธัั ะฟัะธะปะพะถะตะฝะธะต
3. ะัะฟัะฐะฒะธัั: "ะดะพะฑะฐะฒั ะตะถะพะฒะธะบ"
4. ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั: ัะพะฒะฐั ะดะพะฑะฐะฒะปะตะฝ ะฒ ะบะพัะทะธะฝั

#### **@spor3s_bot**
1. ะะฐะฟะธัะฐัั ะฒ Telegram: @spor3s_bot
2. ะัะฟัะฐะฒะธัั: /start
3. ะัะฟัะฐะฒะธัั: "ะตััั ะตะถะพะฒะธะบ?"
4. ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั: ะฑะพั ััะพัะฝัะตั ัะพัะผั ะธ ััะพะบ

#### **@spor3z (Live Account)**
1. ะะฐะฟะธัะฐัั ะฒ Telegram: @spor3z
2. ะัะฟัะฐะฒะธัั: "ัะบะพะปัะบะพ ะบะพะธะฝะพะฒ?"
3. ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั: ะพะฑัััะฝะตะฝะธะต ัะธััะตะผั SC + ัััะปะบะฐ ะฝะฐ ะฟัะธะปะพะถะตะฝะธะต

---

## ๐ง TROUBLESHOOTING

### ะัะพะฑะปะตะผะฐ: "ะะพัั 3000 ัะถะต ะทะฐะฝัั"
```powershell
# ะััะฐะฝะพะฒะธัะต ะฒัะต ัะปัะถะฑั:
.\stop-all-services.ps1

# ะะปะธ ะฝะฐะนะดะธัะต ะธ ัะฑะตะนัะต ะฟัะพัะตัั ะฒัััะฝัั:
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

### ะัะพะฑะปะตะผะฐ: "Ngrok ะฝะต ะพัะฒะตัะฐะตั"
```bash
# ะะตัะตะทะฐะฟัััะธัะต ngrok:
ngrok http --domain=humane-jaguar-annually.ngrok-free.app 3000
```

### ะัะพะฑะปะตะผะฐ: "ะะพัั ะฝะต ะฟะพะดะบะปััะฐัััั ะบ API"
1. ะัะพะฒะตัััะต `NEXT_PUBLIC_BASE_URL` ะฒ env.local
2. ะฃะฑะตะดะธัะตัั ััะพ Next.js ัะตัะฒะตั ะทะฐะฟััะตะฝ
3. ะะตัะตะทะฐะฟัััะธัะต ะฑะพัะพะฒ

### ะัะพะฑะปะตะผะฐ: "Cannot find module"
```bash
# ะะตัะตัััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
npm install

# ะะปั ะฑะพัะพะฒ:
cd tg-bot
npm install
```

---

## ๐ ะะะะะซะ ะะะะะขะะ

1. **ะะฐะฑะพัะฐั ะดะธัะตะบัะพัะธั**
   - โ ะัะฐะฒะธะปัะฝะพ: `C:\Users\User\Documents\spor3s-app\spor3s-app\`
   - โ ะะตะฟัะฐะฒะธะปัะฝะพ: `C:\Users\User\Documents\spor3s-app\`

2. **ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั**
   - ะัะต ะฑะพัั ะธัะฟะพะปัะทััั `env.local` ะธะท ะดะธัะตะบัะพัะธะธ `spor3s-app/`
   - ะัะฟะพะปัะทัะนัะต `NEXT_PUBLIC_BASE_URL` ะดะปั ะฟะตัะตะบะปััะตะฝะธั ะผะตะถะดั localhost/ngrok

3. **Source tracking**
   - Mini App: `source=mini_app`
   - Telegram Bot: `source=telegram_bot`
   - Spor3z Live: `source=spor3z`
   - ะัะต ัะพะพะฑัะตะฝะธั ัะพััะฐะฝััััั ั ะฟะพะปะตะผ `source` ะฒ ะะ

4. **AI Agent Control**
   - ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะตะท API: `/api/ai-agent-control`
   - ะกัะฐััั ัะตัะตะท: `/api/ai-agent-status`
   - ะะฒัะพะผะฐัะธัะตัะบะธะน ัะตะถะธะผ ะฟะพ ัะผะพะปัะฐะฝะธั ะฒะบะปััะตะฝ

---

## ๐ ะะะขะะะ!

ะกะธััะตะผะฐ ะฟะพะปะฝะพัััั ะฝะฐัััะพะตะฝะฐ ะธ ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

**ะกะปะตะดัััะธะต ัะฐะณะธ:**
1. ะะฐะฟัััะธัะต ะฒัะต ัะปัะถะฑั: `.\start-all-services.ps1`
2. ะัะพะฒะตัััะต ััะฐััั: `.\check-services-status.ps1`
3. ะัะพัะตััะธััะนัะต ะฒัะต 3 ะบะฐะฝะฐะปะฐ (ัะผ. ัะฐะทะดะตะป "ะขะตััะธัะพะฒะฐะฝะธะต")
4. ะะฐะฟััะบะฐะนัะต ะฒ production ัะตัะตะท ngrok

---

**ะะพะฝัะฐะบัั ะดะปั ะฟะพะดะดะตัะถะบะธ:**
- Telegram Bot: @spor3s_bot
- Live Account: @spor3z
- Mini App: t.me/spor3s_miniapp_bot

**ะะพะบัะผะตะฝัะฐัะธั:**
- `CURRENT_STATUS_AND_LAUNCH_GUIDE.md` - ะฐะบััะฐะปัะฝัะน ััะฐััั
- `SERVICE_STATUS.md` - ััะตะผะฐ ะทะฐะฟััะบะฐ ัะปัะถะฑ
- `DATABASE_SCHEMA_REFERENCE.md` - ััะตะผะฐ ะะ


