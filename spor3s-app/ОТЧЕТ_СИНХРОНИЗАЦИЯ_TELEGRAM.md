# ๐ค ะะขะงะะข: ะกะะะฅะะะะะะะฆะะฏ TELEGRAM ะะะขะ ะ MINI APP

## โ ะะซะะะะะะะะซะ ะะะะะงะ

### 1. ๐ ะะฐััะธัะตะฝะฝัะน Telegram ะฑะพั (`tg-bot/bot.ts`)

**ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั:**
- โ ะะ ัะฐั ั ัะธะฝััะพะฝะธะทะฐัะธะตะน ัะพะพะฑัะตะฝะธะน
- โ ะะฑัะฐะฑะพัะบะฐ ะบะพะผะฐะฝะด `/start`, `/my_coins`, `/help`
- โ ะกะพะทะดะฐะฝะธะต ะทะฐะบะฐะทะพะฒ ัะตัะตะท ัะฐั
- โ ะฃะฒะตะดะพะผะปะตะฝะธั ะผะตะฝะตะดะถะตัะฐ ะพ ะทะฐะบะฐะทะฐั
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ ะกะพััะฐะฝะตะฝะธะต ะธััะพัะธะธ ัะพะพะฑัะตะฝะธะน

**ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ:**
```typescript
// ะกะธะฝััะพะฝะธะทะฐัะธั ั ะะ API
const aiResponse = await callAI(messages, user.id);

// ะกะพะทะดะฐะฝะธะต ะทะฐะบะฐะทะพะฒ
const orderResult = await createOrder(user.id, orderData);

// ะฃะฒะตะดะพะผะปะตะฝะธั ะผะตะฝะตะดะถะตัะฐ
await notifyManager(orderResult.order, ctx.from);
```

### 2. ๐ง ะะฑะฝะพะฒะปะตะฝะฝัะน AI API (`app/api/ai/route.ts`)

**ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ:**
- โ FAQ ะฟะพ Spor3s Coins
- โ ะกัะตะฝะฐัะธะธ ะทะฐะบะฐะทะพะฒ ะธ ะดะพััะฐะฒะบะธ
- โ ะะฝัะพัะผะฐัะธั ะพ ะฟะพะฑะพัะฝัั ัััะตะบัะฐั
- โ ะะพะฝัะฐะบัั ะผะตะฝะตะดะถะตัะฐ @ai_ryzhov
- โ ะะฐััะธัะตะฝะฝัะน ะบะพะฝัะตะบัั (600 ัะพะบะตะฝะพะฒ)

**ะะพะฑะฐะฒะปะตะฝะฝัะต FAQ:**
```markdown
Q: "ะงัะพ ัะฐะบะพะต Spor3s Coins?"
A: Spor3s Coins (SC) โ ััะพ ะฒะฝัััะตะฝะฝัั ะฒะฐะปััะฐ ะฟะปะฐััะพัะผั...

Q: "ะะฐะบ ะทะฐัะฐะฑะพัะฐัั SC?"
A: โข ะะถะตะดะฝะตะฒะฝัะน ัะตะบะธะฝ: +5 SC
โข ะะถะตะฝะตะดะตะปัะฝะฐั ะฐะฝะบะตัะฐ: +20 SC...

Q: "ะะฐะบ ะพัะพัะผะธัั ะทะฐะบะฐะท?"
A: ะ Mini App: ะดะพะฑะฐะฒััะต ัะพะฒะฐัั ะฒ ะบะพัะทะธะฝั โ ะพัะพัะผะธัะต ะทะฐะบะฐะท...
```

### 3. ๐ API ะณะตะฝะตัะฐัะธะธ ะบะพะดะพะฒ ะฟัะธะฒัะทะบะธ (`app/api/generate-auth-code/route.ts`)

**ะคัะฝะบัะธะธ:**
- โ ะะตะฝะตัะฐัะธั ัะฝะธะบะฐะปัะฝัั 8-ัะธะผะฒะพะปัะฝัั ะบะพะดะพะฒ
- โ ะกัะพะบ ะดะตะนััะฒะธั 24 ัะฐัะฐ
- โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะพัะธััะบะฐ ะธััะตะบัะธั ะบะพะดะพะฒ
- โ ะะฝัะตะณัะฐัะธั ั ัะฐะฑะปะธัะตะน `tg_link_codes`

### 4. ๐จ ะะพะผะฟะพะฝะตะฝั ะฟัะธะฒัะทะบะธ ะฑะพัะฐ (`components/TelegramBotLink.tsx`)

**ะะฝัะตััะตะนั:**
- โ ะะตะฝะตัะฐัะธั ะบะพะดะพะฒ ะฟัะธะฒัะทะบะธ
- โ ะะพะฟะธัะพะฒะฐะฝะธะต ะบะพะผะฐะฝะด ะฒ ะฑััะตั ะพะฑะผะตะฝะฐ
- โ ะะฝััััะบัะธะธ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะธ ััะฟะตัะฝัั ะพะฟะตัะฐัะธะน

### 5. ๐๏ธ ะะฐะทะฐ ะดะฐะฝะฝัั

**ะกะพะทะดะฐะฝะฝัะต ัะฐะฑะปะธัั:**
- โ `tg_link_codes` - ะบะพะดั ะฟัะธะฒัะทะบะธ
- โ ะะฝะดะตะบัั ะดะปั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- โ RLS ะฟะพะปะธัะธะบะธ ะฑะตะทะพะฟะฐัะฝะพััะธ
- โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะพัะธััะบะฐ ะธััะตะบัะธั ะบะพะดะพะฒ

**SQL ัะบัะธะฟั:** `create_tg_link_codes.sql`

### 6. ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

**ะขะตััะพะฒัะน ัะบัะธะฟั:** `test-telegram-sync.js`

**ะัะพะฒะตััะตะผัะต ะบะพะผะฟะพะฝะตะฝัั:**
- โ AI ัะฐั
- โ ะะตะฝะตัะฐัะธั ะบะพะดะพะฒ ะฟัะธะฒัะทะบะธ
- โ ะกะพะทะดะฐะฝะธะต ะทะฐะบะฐะทะพะฒ
- โ ะกะธะฝััะพะฝะธะทะฐัะธั ัะพะพะฑัะตะฝะธะน
- โ ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน

## ๐ฏ ะกะฆะะะะะะ ะะกะะะะฌะะะะะะะฏ

### ะกัะตะฝะฐัะธะน 1: ะัะธะฒัะทะบะฐ ะฐะบะบะฐัะฝัะฐ
1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั Mini App
2. ะะฐะถะธะผะฐะตั "ะัะธะฒัะทะฐัั ะฑะพัะฐ"
3. ะะพะฟะธััะตั ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะน ะบะพะด
4. ะัะฟัะฐะฒะปัะตั `/start <ะบะพะด>` ะฑะพัั @web3grow
5. ะะพะปััะฐะตั ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะฟัะธะฒัะทะบะธ

### ะกัะตะฝะฐัะธะน 2: ะะฑัะตะฝะธะต ั ะะ
1. ะะพะปัะทะพะฒะฐัะตะปั ะฟะธัะตั ัะพะพะฑัะตะฝะธะต ะฒ Mini App ะธะปะธ ะฑะพัะต
2. ะะ ะพัะฒะตัะฐะตั ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ
3. ะกะพะพะฑัะตะฝะธั ัะพััะฐะฝััััั ะฒ ะฑะฐะทะต
4. ะััะพัะธั ัะธะฝััะพะฝะธะทะธััะตััั ะผะตะถะดั ััะตะดะฐะผะธ

### ะกัะตะฝะฐัะธะน 3: ะัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะฐ
1. ะะพะปัะทะพะฒะฐัะตะปั ัะฟัะฐัะธะฒะฐะตั ะพ ะฟัะพะดัะบัะฐั
2. ะะ ัะตะบะพะผะตะฝะดัะตั ัะพะฒะฐัั
3. ะะพะปัะทะพะฒะฐัะตะปั ะพัะพัะผะปัะตั ะทะฐะบะฐะท
4. ะะตะฝะตะดะถะตั ะฟะพะปััะฐะตั ัะฒะตะดะพะผะปะตะฝะธะต
5. ะะฐะบะฐะท ัะพะทะดะฐะตััั ะฒ ัะธััะตะผะต

### ะกัะตะฝะฐัะธะน 4: FAQ ะธ ะฟะพะดะดะตัะถะบะฐ
1. ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะดะฐะตั ะฒะพะฟัะพัั ะพ SC, ะดะพััะฐะฒะบะต, ัััะตะบัะฐั
2. ะะ ะฟัะตะดะพััะฐะฒะปัะตั ะฟะพะดัะพะฑะฝัะต ะพัะฒะตัั
3. ะัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฝะฐะฟัะฐะฒะปัะตั ะบ ะผะตะฝะตะดะถะตัั

## ๐ ะะะฅะะขะะะขะฃะะ ะกะะกะขะะะซ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Mini App      โ    โ   Telegram Bot  โ    โ   Supabase DB   โ
โ   (Frontend)    โโโโโบโ   @web3grow     โโโโโบโ   (Backend)     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   AI Chat API   โ    โ   Order API     โ    โ   Messages      โ
โ   /api/ai       โ    โ   /api/order    โ    โ   Orders        โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะขะะฅะะะงะะกะะะ ะะะขะะะ

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# OpenRouter (AI)
OR_TOKEN=your_openrouter_token

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token
MANAGER_CHAT_ID=your_manager_chat_id

# App URLs
NEXT_PUBLIC_BASE_URL=http://localhost:3000
```

### ะะพะผะฐะฝะดั ะดะปั ะทะฐะฟััะบะฐ
```bash
# Mini App
npm run dev

# Telegram Bot
cd tg-bot
npm install
npm run dev
```

### SQL ะผะธะณัะฐัะธะธ
1. ะัะฟะพะปะฝะธัะต `create_tg_link_codes.sql` ะฒ Supabase
2. ะัะพะฒะตัััะต ััััะบัััั ัะฐะฑะปะธั
3. ะะฐัััะพะนัะต RLS ะฟะพะปะธัะธะบะธ

## ๐ ะะะะฃะะฌะขะะขะซ

### โ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั:
- ะกะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะน ะะ ัะฐั ะผะตะถะดั Mini App ะธ Telegram
- ะัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะพะฒ ัะตัะตะท ัะฐั
- ะฃะฒะตะดะพะผะปะตะฝะธั ะผะตะฝะตะดะถะตัะฐ @ai_ryzhov
- ะกะธััะตะผะฐ ะบะพะดะพะฒ ะฟัะธะฒัะทะบะธ
- FAQ ะฟะพ ะฒัะตะผ ะฒะพะฟัะพัะฐะผ
- ะขะตััะธัะพะฒะฐะฝะธะต ะธ ะดะพะบัะผะตะฝัะฐัะธั

### ๐ ะะพะทะผะพะถะฝะพััะธ ะดะปั ัะฐััะธัะตะฝะธั:
- ะะฝัะตัะฐะบัะธะฒะฝัะต ัะพัะผั ะทะฐะบะฐะทะฐ ะฒ ะฑะพัะต
- ะะฒัะพะผะฐัะธัะตัะบะธะต ัะฒะตะดะพะผะปะตะฝะธั ะพ ััะฐัััะต ะทะฐะบะฐะทะฐ
- ะะฝัะตะณัะฐัะธั ั ะฟะปะฐัะตะถะฝัะผะธ ัะธััะตะผะฐะผะธ
- ะะฝะฐะปะธัะธะบะฐ ะธ ะผะตััะธะบะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- ะะฒัะพะผะฐัะธะทะฐัะธั ะฟัะพัะตััะพะฒ ะพะฑัะฐะฑะพัะบะธ ะทะฐะบะฐะทะพะฒ

## ๐ ะะะะะะะะะ

- **ะขะตัะฝะธัะตัะบะฐั ะฟะพะดะดะตัะถะบะฐ:** @ai_ryzhov
- **ะะพะบัะผะตะฝัะฐัะธั:** `TELEGRAM_SYNC_README.md`
- **ะขะตััั:** `test-telegram-sync.js`
- **ะัะธะผะตัั:** ะัะต ะบะพะผะฟะพะฝะตะฝัั ะณะพัะพะฒั ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

## ๐ ะกะะะะฃะฎะฉะะ ะจะะะ

1. โ ะกะธะฝััะพะฝะธะทะฐัะธั ัะฐัะฐ
2. โ ะัะพัะผะปะตะฝะธะต ะทะฐะบะฐะทะพะฒ
3. โ ะฃะฒะตะดะพะผะปะตะฝะธั ะผะตะฝะตะดะถะตัะฐ
4. ๐ ะะฐััะธัะตะฝะฝัะต ััะตะฝะฐัะธะธ
5. ๐ ะะฝะฐะปะธัะธะบะฐ ะธ ะผะตััะธะบะธ
6. ๐ ะะฒัะพะผะฐัะธะทะฐัะธั ะฟัะพัะตััะพะฒ

---

**ะกัะฐััั ะฟัะพะตะบัะฐ:** โ ะะะขะะ ะ ะะกะะะะฌะะะะะะะฎ

ะัะต ะบะพะผะฟะพะฝะตะฝัั ัะธะฝััะพะฝะธะทะฐัะธะธ Telegram ะฑะพัะฐ ะธ Mini App ัะตะฐะปะธะทะพะฒะฐะฝั ะธ ะฟัะพัะตััะธัะพะฒะฐะฝั. ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ ะฟัะพะดะฐะบัะตะฝั.