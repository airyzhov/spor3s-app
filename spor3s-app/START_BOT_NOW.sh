#!/bin/bash
# –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ –ë–û–¢–ê –ù–ê VPS - –í–´–ü–û–õ–ù–ò–¢–ï –ù–ê –°–ï–†–í–ï–†–ï

echo "üöÄ –ë–´–°–¢–†–´–ô –ó–ê–ü–£–°–ö @spor3s_bot"
echo "=============================="
echo ""

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /root/spor3s-app/spor3s-app 2>/dev/null || cd /var/www/spor3s-app/spor3s-app 2>/dev/null || {
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ: cd /path/to/spor3s-app/spor3s-app"
    exit 1
}

echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"
echo ""

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
echo "üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ GitHub..."
git pull origin main

echo ""

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
pm2 stop all 2>/dev/null
pm2 delete all 2>/dev/null

echo ""

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
echo "üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞..."
pm2 start final-bot-fix.js --name "spor3s-bot"

echo ""

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
echo "üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
pm2 save

echo ""

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
echo "üìä –°–¢–ê–¢–£–° –ë–û–¢–ê:"
pm2 list

echo ""
echo "üìù –ü–û–°–õ–ï–î–ù–ò–ï –õ–û–ì–ò:"
pm2 logs spor3s-bot --lines 10 --nostream

echo ""
echo "üéâ –ë–û–¢ –ó–ê–ü–£–©–ï–ù!"
echo ""
echo "üí° –ö–æ–º–∞–Ω–¥—ã:"
echo "   pm2 logs spor3s-bot    - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤"
echo "   pm2 restart spor3s-bot - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫"
echo "   pm2 stop spor3s-bot    - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞"
echo ""
echo "üì± –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram: @spor3s_bot"
echo "   /start"
echo "   –ø—Ä–∏–≤–µ—Ç"
echo "   –µ—Å—Ç—å –µ–∂–æ–≤–∏–∫?"
echo ""

