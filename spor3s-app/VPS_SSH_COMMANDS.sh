#!/bin/bash
# üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ó–ê–ü–£–°–ö–ê –ë–û–¢–ê –ù–ê VPS ai.spor3s.ru

echo "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ò –ó–ê–ü–£–°–ö @Spor3s_bot –ù–ê VPS"
echo "=========================================="

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Node.js
echo ""
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:"
ps aux | grep node
pm2 list

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
echo ""
echo "2Ô∏è‚É£ –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:"
cd /var/www/spor3s-app || cd /home/spor3s-app || cd ~/spor3s-app
pwd
ls -la

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
echo ""
echo "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ env.local:"
cat env.local | grep "NEXT_PUBLIC_BASE_URL"
cat env.local | grep "TELEGRAM_BOT_TOKEN"

# 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo ""
echo "4Ô∏è‚É£ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:"
pm2 stop all
pm2 delete all

# 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo ""
echo "5Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:"
npm install

# 6. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–æ—Ç–∞
echo ""
echo "6Ô∏è‚É£ –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram:"
cd tg-bot
node test-bot.js

# 7. –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ PM2
echo ""
echo "7Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤:"
pm2 start enhanced-bot.js --name spor3s-bot --watch
cd ..
pm2 start start-spor3z-improved.js --name spor3z-bot --watch

# 8. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
echo ""
echo "8Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PM2:"
pm2 save
pm2 startup

# 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
echo ""
echo "9Ô∏è‚É£ –õ–æ–≥–∏ –±–æ—Ç–æ–≤:"
pm2 logs --lines 50

# 10. –°—Ç–∞—Ç—É—Å
echo ""
echo "üîü –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:"
pm2 status
pm2 monit


