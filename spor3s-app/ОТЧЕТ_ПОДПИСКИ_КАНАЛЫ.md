# üì± –û—Ç—á–µ—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **–£–±—Ä–∞–Ω–∞ –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å "–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å":**

#### ‚ùå **–£–¥–∞–ª–µ–Ω–æ:**
```jsx
// –£–î–ê–õ–ï–ù–û:
<div style={{
  background: getProgressPhase(currentWeek).color,
  color: "white",
  padding: "8px 20px",
  borderRadius: "20px",
  display: "inline-block",
  fontWeight: "bold"
}}>
  {getProgressPhase(currentWeek).name} ‚Ä¢ –ù–µ–¥–µ–ª—è {currentWeek}
</div>
```

#### ‚úÖ **–û—Å—Ç–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ:**
```jsx
{/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
<div style={{ textAlign: "center", marginBottom: "30px" }}>
  <h1 style={{ color: "#fff", fontSize: "28px", marginBottom: "10px" }}>
    üìä –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å
  </h1>
</div>
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–¥–ø–∏—Å—å –≤–æ–∑–ª–µ –≥—Ä–∏–±–∞:**

#### üîÑ **–ò–∑–º–µ–Ω–µ–Ω–æ:**
```jsx
// –ë–´–õ–û:
<div style={{
  color: "#ccc",
  fontSize: "14px",
  lineHeight: "1.5"
}}>
  –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≥—Ä–∏–±, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
</div>

// –°–¢–ê–õ–û:
<div style={{
  color: "#ccc",
  fontSize: "14px",
  lineHeight: "1.5"
}}>
  –û—Ç–º–µ—á–∞–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å
</div>
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏:**

#### üîß **–°–æ–∑–¥–∞–Ω API endpoint `/api/subscribe-bonus/route.ts`:**
```typescript
export async function POST(req: NextRequest) {
  try {
    const { user_id, channel_type } = await req.json();
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!['telegram', 'youtube'].includes(channel_type)) {
      return NextResponse.json({ error: "–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –∫–∞–Ω–∞–ª–∞" }, { status: 400 });
    }

    const bonusAmount = 50; // 50 SC –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞
    const { data: existingBonus } = await supabaseServer
      .from("coin_transactions")
      .select("id")
      .eq("user_id", user_id)
      .eq("type", `subscribe_${channel_type}`)
      .single();

    if (existingBonus) {
      return NextResponse.json({ 
        error: `–ë–æ–Ω—É—Å –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ ${channel_type === 'telegram' ? 'Telegram' : 'YouTube'} —É–∂–µ –ø–æ–ª—É—á–µ–Ω!` 
      }, { status: 400 });
    }

    // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ –≤ –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑
    const { error: updateError } = await supabaseServer
      .from("orders")
      .update({
        spores_coin: (activeOrder.spores_coin || 0) + bonusAmount
      })
      .eq("id", activeOrder.id);

    // –ó–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    const { error: txError } = await supabaseServer
      .from("coin_transactions")
      .insert([{
        user_id,
        order_id: activeOrder.id,
        type: `subscribe_${channel_type}`,
        amount: bonusAmount,
        description: `–ë–æ–Ω—É—Å –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ ${channel_type === 'telegram' ? 'Telegram –∫–∞–Ω–∞–ª' : 'YouTube –∫–∞–Ω–∞–ª'}`,
        created_at: new Date().toISOString(),
      }]);

    return NextResponse.json({ 
      success: true, 
      bonus: bonusAmount,
      message: `+${bonusAmount} SC –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ ${channel_type === 'telegram' ? 'Telegram' : 'YouTube'}!`
    });
  } catch (e) {
    return NextResponse.json({ error: "–û—à–∏–±–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–∞" }, { status: 500 });
  }
}
```

#### üé® **–î–æ–±–∞–≤–ª–µ–Ω UI –±–ª–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ RoadMap.tsx:**

**–°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```jsx
const [subscribeLoading, setSubscribeLoading] = useState<string | null>(null);
const [subscribeSuccess, setSubscribeSuccess] = useState<string | null>(null);
```

**–§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫:**
```jsx
const handleSubscribe = async (channelType: 'telegram' | 'youtube') => {
  if (!user?.id) {
    alert('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É');
    return;
  }

  setSubscribeLoading(channelType);
  setSubscribeSuccess(null);

  try {
    const response = await fetch('/api/subscribe-bonus', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ user_id: user.id, channel_type: channelType })
    });

    const data = await response.json();

    if (data.success) {
      setSubscribeSuccess(channelType);
      setCurrentSC(prev => prev + data.bonus);
      alert(data.message);
    } else {
      alert(data.error || '–û—à–∏–±–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–∞');
    }
  } catch (error) {
    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞');
  } finally {
    setSubscribeLoading(null);
  }
};
```

**UI –±–ª–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞:**

**Telegram –∫–∞–Ω–∞–ª:**
```jsx
<div style={{
  background: "rgba(255, 255, 255, 0.1)",
  borderRadius: "15px",
  padding: "20px",
  textAlign: "center",
  border: subscribeSuccess === 'telegram' ? "2px solid #10b981" : "2px solid rgba(255, 255, 255, 0.1)"
}}>
  <div style={{ fontSize: "48px", marginBottom: "15px" }}>üì±</div>
  <div style={{ fontSize: "18px", fontWeight: "bold", color: "#fff", marginBottom: "10px" }}>
    Telegram –∫–∞–Ω–∞–ª
  </div>
  <div style={{ fontSize: "14px", color: "#ccc", marginBottom: "15px" }}>
    –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ t.me/spor3s
  </div>
  <div style={{ fontSize: "16px", fontWeight: "bold", color: "#ff00cc", marginBottom: "15px" }}>
    +50 SC
  </div>
  {/* –ö–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞ */}
</div>
```

**YouTube –∫–∞–Ω–∞–ª:**
```jsx
<div style={{
  background: "rgba(255, 255, 255, 0.1)",
  borderRadius: "15px",
  padding: "20px",
  textAlign: "center",
  border: subscribeSuccess === 'youtube' ? "2px solid #10b981" : "2px solid rgba(255, 255, 255, 0.1)"
}}>
  <div style={{ fontSize: "48px", marginBottom: "15px" }}>üì∫</div>
  <div style={{ fontSize: "18px", fontWeight: "bold", color: "#fff", marginBottom: "10px" }}>
    YouTube –∫–∞–Ω–∞–ª
  </div>
  <div style={{ fontSize: "14px", color: "#ccc", marginBottom: "15px" }}>
    –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ @spor3s
  </div>
  <div style={{ fontSize: "16px", fontWeight: "bold", color: "#ff00cc", marginBottom: "15px" }}>
    +50 SC
  </div>
  {/* –ö–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞ */}
</div>
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
1. **–£–±—Ä–∞–Ω–∞ –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å** —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –∏ –Ω–µ–¥–µ–ª–µ–π
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–¥–ø–∏—Å—å** –≤–æ–∑–ª–µ –≥—Ä–∏–±–∞ –Ω–∞ "–û—Ç–º–µ—á–∞–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å"
3. **–î–æ–±–∞–≤–ª–µ–Ω—ã 2 –Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏:**
   - üì± **Telegram –∫–∞–Ω–∞–ª** (t.me/spor3s) - +50 SC
   - üì∫ **YouTube –∫–∞–Ω–∞–ª** (@spor3s) - +50 SC

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **API endpoint** `/api/subscribe-bonus` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ** –±–æ–Ω—É—Å–∞
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ `coin_transactions`
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É—Å–ø–µ—Ö–∞
- **–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏** –Ω–∞ –∫–∞–Ω–∞–ª—ã –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏

### üé® **UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞** - Telegram (—Å–∏–Ω–∏–π), YouTube (–∫—Ä–∞—Å–Ω—ã–π)
- **–ê–Ω–∏–º–∞—Ü–∏–∏** –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏
- **–°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏** —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- **–£—Å–ø–µ—à–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** —Å –∑–µ–ª–µ–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

### üí∞ **–ú–µ—Ö–∞–Ω–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è:**
- **50 SC** –∑–∞ –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª
- **–û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –±–æ–Ω—É—Å** - –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º –∑–∞–∫–∞–∑–æ–º** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã**: ~25 –º–∏–Ω—É—Ç
**–î–æ–±–∞–≤–ª–µ–Ω–æ**: 2 –Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
**API endpoints**: 1 –Ω–æ–≤—ã–π
**UI –±–ª–æ–∫–æ–≤**: 2 –Ω–æ–≤—ã—Ö 